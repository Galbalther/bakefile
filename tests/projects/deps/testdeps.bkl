toolsets = gnu gnu-osx vs2008 vs2010;

vs2008.solutionfile = testdeps2008.sln;

library common {
    sources { common.c }

    if ( $(toolset) == gnu || $(toolset) == gnu-osx )
        libs += iconv;
    if ( $(toolset) == vs2010 || $(toolset) == vs2008 )
        libs += wininet;
}

library libA {
    libname = A;
    deps = common;
    sources { libA.c }
}

exe testdeps {
    deps = libA;
    sources { testdeps.c }
}
