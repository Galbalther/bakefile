toolsets = gnu gnu-osx vs2010;

library common {
    sources { common.c }

    if ( $(toolset) == gnu || $(toolset) == gnu-osx )
        libs += iconv;
    if ( $(toolset) == vs2010 )
        libs += wininet;
}

library libA {
    libname = A;
    deps = common;
    sources { libA.c }
}

exe testdeps {
    deps = libA;
    sources { testdeps.c }
}
