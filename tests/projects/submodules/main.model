module submodules/main.bkl {
  submodules {
    submodules/lib/libcommon.bkl
    submodules/child/child.bkl
  }
  variables {
    toolsets = [gnu, vs2010]
  }
  targets {
    exe main {
      deps = [common]
      sources {
        file @top_srcdir/main.cpp
      }
    }
  }
}

module submodules/lib/libcommon.bkl {
  variables {
  }
  targets {
    library common {
      sources {
        file @top_srcdir/lib/utils.cpp
      }
    }
  }
}

module submodules/child/child.bkl {
  variables {
  }
  targets {
    exe child {
      deps = [common]
      sources {
        file @top_srcdir/child/child.cpp
      }
    }
  }
}
